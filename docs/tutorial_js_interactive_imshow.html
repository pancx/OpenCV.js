<!DOCTYPE html>
<html>
<title>Getting Started with Images</title>
<head>
<style>
canvas {
    border: 1px solid black;
}
</style>
</head>
<body>
<div id="showcase">
    <div>
        <canvas id="canvas1"></canvas>
        <canvas id="canvas2"></canvas>
    </div>
    <input type="file" id="input" name="file" />
</div>
<button onclick="executeCode()">Try it</button>
<script async src="opencv.js"></script>
<script>
function executeCode() {
    var text = document.getElementById("TestCode").value;
    eval(text);
}

var inputElement = document.getElementById("input");
inputElement.addEventListener("change", handleFiles, false);
function handleFiles(e) {
    var canvas = document.getElementById("canvas1");
    var canvasWidth = 600;
    var canvasHeight = 400;
    var ctx = canvas.getContext("2d");
    var url = URL.createObjectURL(e.target.files[0]);
    var img = new Image();
    img.onload = function() {
        var scaleFactor=Math.min((canvasWidth/img.width), (canvasHeight/img.height));
        canvas.width = img.width*scaleFactor;
        canvas.height = img.height*scaleFactor;
        ctx.drawImage(img, 0, 0, img.width*scaleFactor, img.height*scaleFactor);
    }
    img.src = url;
}
</script>

<div id="CodeArea">
<h2>Input your code</h2>
<textarea rows="14" cols="80" id="TestCode" spellcheck="false">
var src = cv.imread("canvas1");
var dst = new cv.Mat();
// To distinguish the input and output, we graying the image.
// You can try more different conversion
cv.cvtColor(src, dst, cv.ColorConversionCodes.COLOR_RGBA2GRAY.value, 0);
cv.cvtColor(dst, dst, cv.ColorConversionCodes.COLOR_GRAY2RGBA.value, 0);
cv.imshow("canvas2", dst);
src.delete();
dst.delete();
</textarea>
</div>
</body>
</html>